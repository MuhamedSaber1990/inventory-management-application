<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Products</title>
    <link rel="stylesheet" href="/css/app.css" />
  </head>

  <body class="auth-body">
    <div class="auth-wrapper">
      <div class="auth-card">
        <header class="auth-header">
          <h1>Products List</h1>
          <p>Your inventory items</p>
        </header>
        <div class="dashboard-actions right">
          <a href="/products/add" class="auth-btn">Add Product</a>
        </div>

        <div class="dashboard-section">
          <% if (products && products.length > 0) { %>

          <div class="products-container">
            <table class="products-table">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Name</th>
                  <th>SKU</th>
                  <th>Price (â‚¬)</th>
                  <th>Quantity</th>
                  <th>Description</th>
                  <th>Update</th>
                  <th>Delete</th>
                </tr>
              </thead>

              <tbody>
                <% products.forEach((product ,index) => { %>
                <tr>
                  <td><%= index+1 %></td>
                  <td><%= product.name %></td>
                  <td><%= product.sku %></td>
                  <td><%= product.price %></td>
                  <td><%= product.quantity %></td>
                  <td><%= product.description %></td>
                  <td class="table-actions">
                    <a href="/products/edit/<%= product.id %>" class="table-btn"
                      >Update</a
                    >
                  </td>
                  <td class="table-actions">
                    <form
                      action="/products/delete/<%= product.id %>"
                      method="POST"
                      class="delete-form"
                      data-name="<%= product.name %>"
                    >
                      <input
                        type="hidden"
                        name="_csrf"
                        value="<%= csrfToken %>"
                      />

                      <button type="submit" class="table-btn table-btn-danger">
                        Delete
                      </button>
                    </form>
                  </td>
                </tr>
                <% }) %>
              </tbody>
            </table>
          </div>

          <% } else { %>
          <p class="no-products">No products available.</p>
          <% } %>
        </div>

        <footer class="auth-footer footer-actions">
          <a href="/dashboard" class="auth-btn">Back to Dashboard</a>
        </footer>
      </div>
    </div>
    <script src="/js/app.js"></script>
  </body>
</html>
